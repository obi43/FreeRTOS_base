# Raspberry Pico FreeRTOS Start code 

This is a starting point for a Raspberry Pico project using FreeRTOS. 

Either use this repositorry, and add FreeRTOS to the projects root directory by:

```bash
git clone https://github.com/raspberrypi/FreeRTOS-Kernel/
```

Or alternatively do it manually like this:

- Use the VScode Raspberry Pi Pico extension to create a "New C/C++ Project"
- Copy FreeRTOS-Kernel folder into the new project's root directory. Use the "git clone" command above to clone the FreeRTOS repossitory.
- Copy \FreeRTOS-Kernel\portable\ThirdParty\GCC\RP2350_ARM_NTZ\FreeRTOS_Kernel_import.cmake into project root
- Copy the [FreeRTOSConfig.h](https://github.com/raspberrypi/pico-examples/tree/master/freertos) file from SDK example into project root. 
- Do the following modifications to your CMakeLists.txt, below pico_sdk_init():
    ```CMake
    set(FREERTOS_KERNEL_PATH  ${CMAKE_CURRENT_LIST_DIR}/FreeRTOS-Kernel CACHE STRING "" FORCE )
    include(FreeRTOS_Kernel_import.cmake)
    ```
And add FreeRTOS-Kernel-Heap4 to your target_link_libraries

Note that the CMakeLists.txt in this repossitory is slightly modified compared with the file generated by the Pico VSCode extension. 
- A define for telling C code if compiling for a pico module with wifi.
- Using ${PROJECT_NAME} instead of repeating the project name several plases. Project name can then be changed in project() only.
- Placing source code in the /src subfolder and automatically adding all c and cpp files in this folder to the build.
- Handeling pico, pico2, pico_w and pico2_w targets.

## FreeRTOS API reference

[FreeRTOS API](https://www.freertos.org/Documentation/02-Kernel/04-API-references/01-Task-creation/00-TaskHandle)
